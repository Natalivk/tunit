document.addEventListener("DOMContentLoaded",function(){let d=document.getElementById("movies-container"),r=document.getElementById("load-more");var e=document.getElementById("movies-filters-form");let t=document.getElementById("sort-by"),n=document.getElementById("search"),c=1,s="rating_desc",l="";function a(t=!1){var e=new FormData,n=(e.append("action","fetch_movies"),e.append("page",c),document.getElementById("genre").value||""),a=document.getElementById("year-from").value||"",o=document.getElementById("year-to").value||"";e.append("genre",n),e.append("year_from",a),e.append("year_to",o),e.append("sort_by",s),e.append("search",l),fetch(movies_ajax.ajaxurl,{method:"POST",body:e}).then(e=>e.json()).then(e=>{t&&(d.innerHTML="",c=1),e.html&&(d.insertAdjacentHTML("beforeend",e.html),c++),r.style.display=e.has_more_posts?"block":"none"}).catch(e=>console.error("Error fetching movies:",e))}r.addEventListener("click",function(){a()}),e.addEventListener("submit",function(e){e.preventDefault(),c=1,a(!0)}),t.addEventListener("change",function(){s=t.value,c=1,a(!0)}),n.addEventListener("input",function(){l=n.value,c=1,a(!0)}),a(!0),document.querySelectorAll(".select-wrapper").forEach(e=>{var t=e.querySelector("select");t.addEventListener("focus",()=>e.classList.add("active")),t.addEventListener("blur",()=>e.classList.remove("active"))})});